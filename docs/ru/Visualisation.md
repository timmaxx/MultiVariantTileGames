# Визуализация (т.е. как будут графически изображаться главное поле, игровые объекты)

## 1. Введение
Сейчас, при передаче расстановки и при каждом шаге, сервер передаёт клиенту информацию о графической визуализации (далее - визуализации) по каждой ячейке, которую затронула расстановка и которую затронул ход.
Такое решение имеет как некоторые достоинства, так и недостатки. И они являются следствием того, что пакеты с данными матча от сервера, имеют смешанную структуру (логика игры + визуализация).

#### Достоинства:
- уже есть готовая реализация.

####  Недостатки:
- логика игр в классах пересечена с логикой визуализации,
- информации по сети будет передаваться больше,
- отладка будет чуть сложнее,
- реализация каждого последующего типа игры будет сложнее.

#### Что-бы уйти от перечисленных недостатков следует архитектуру построения модулей сделать такой, что-бы логика игры была отделена от визуализации максимально. На 14.01.2025 это не так. Ниже описано предлагаемое решение.

## 2. Элементы визуализации
### 2.1. Главное поле с легендой
#### 2.1.1. Главное поле (без легенды)
Сами ячейки игрового поля. Их будет M x N и у каждой есть уникальные координаты. Нужно предусмотреть как одинаковые фоны для любой ячейки (Сокобан, Сапёр), так и возможность раскрасить фон по разному в зависимости от координат (Шашки, Шахматы).

Каждая из ячеек может быть контролом (т.е. принимать клики от мышки).
#### 2.1.2. Легенда главного поля
У главного поля есть четыре стороны. Каждая из сторон может быть:
- либо не подписана (Сокобан, Сапёр),
- либо подписана:
- - и не являться частью расстановки, а только лишь указывать на символическое имя столбца или строки - напротив каждой строки или столбца пишется символ (или слово) (для Шашек и Шахмат: горизонтали подписываются слева цифрами, вертикали снизу латинскими буквами).
- - и являться частью расстановки, и даже может иметь несколько элементов с разным уровнем удаления от главного поля (Японский кроссворд).

Легенда и её элементы не могут быть контролами - только представления. 

### 2.2. Игровые объекты
#### 2.1.1. Постоянные на протяжении всего матча. Например:
- Стены лабиринтов, не изменяемые, с которыми не может совмещаться никакой другой объект (Сокобан).
- Метка на ячейке, с которой может совмещаться какие-то другие типы объектов (Для Сокобан: метка дом, на которую может быть поставлена коробка или игрок, но не стена).
#### 2.1.2. Не постоянные на протяжении матча. Например:
- Подвижный и/или выставляемый и/или снимаемый объект (для Сокобан: игрок, коробка; для Шашек: шашка или дамка).

## 3. Инициализация игрового клиента
### 3.1. Игровой клиент заранее (хардкорно) знает всё о визуализации
Т.е. какими текстами, цветами, картинками отрисовывать каждый элемент любого типа игры - заложено в код клиента.

### 3.2. Игровой клиент получает информацию о визуализации от игрового сервера при выборе типа игры 
Клиент получает информацию о визуализации от игрового сервера при выборе типа игры (автоматически или при дополнительном запросе).
На сервере может быть несколько вариантов для визуализации на определённом игровом клиенте.
Например, для Шашек и Шахмат:
- белые поля клеток выражены в чистом белом цвете, и др...
- белые поля клеток выражены в бежевом цвете, и др...

И даже можно было-бы хранить визуализацию для 3d-фигур и 3d-доски. И опять-таки в разных цветах.

После первичной инициализации, клиент мог-бы для себя создать свою комбинацию визуализации.

### 3.3. Игровой клиент не оперирует информацией о визуализации
Игровой клиент в принципе не оперирует, и следовательно, не запрашивает и не получает, информацию о визуализации от игрового сервера.
Такой вариант может быть интересен для, например:
- игровой клиент с чисто текстовой консолью,
- игровой клиент - робот.
Для этих вариантов, достаточно не запрашивать инфу о визуализации, а если она и будет поступать, то отбрасывать её.

## 4. Передача информации от сервера клиенту о матче
Сервер, передавая информацию о матче (т.е. сначала расстановку, а потом и ходы), уже не должен передавать информацию о визуализации.

## 5. Отрисовка при старте матча
Поскольку клиент, который оперирует визуализацией, получил информацию о визуализации, то при выборе матча, можно отрисовать его:
- Отрисовка пустой доски с легендой, но без расстановки.
- Отрисовка расстановки (если одна или несколько из этих частей определены):
- - расстановка в части легенды,
- - расстановка постоянных объектов,
- - расстановка переменных объектов.

## 6. Отрисовка в ходе матча
При получении информации об игровом ходе, клиент может стереть и/или нарисовать переменный объект, и при этом он может и должен:
- проверить (опционально), нет-ли попытки перерисовать ячейку с постоянным и неизменяемым объектом,
- перерисовать пустую ячейку,
- нарисовать на пустой ячейке объект.

## 7. Смена параметров визуализации во время матча
Кроме того, можно реализовать клиент и так, что пользователь может изменить параметры визуализации во время матча - как запросив у сервера альтернативные параметры, так и самому изменить. Сетевой обмен не должен будет содержать информации о расстановке или ходах.
